;;; package --- summary

;;; Commentary:
;; init.el that is run first to initialize my Emacs configuration

;;; Code:

;; initialize melpa and package
(defun sys-config/melpa ()
  (require 'package)
  (let* ((no-ssl (and (memq system-type '(windows-nt ms-dos))
                      (not (gnutls-available-p))))
         (url (concat (if no-ssl "http" "https") "://melpa.org/packages/")))
    (add-to-list 'package-archives (cons "melpa" url) t))
  (when (< emacs-major-version 24)
    (add-to-list 'package-archives '("gnu" . "http://elpa.gnu.org/packages/")))
  (package-initialize))

(defun user-config/dependencies ()
  (setq base-dir (expand-file-name "/home/rob/.emacs.d/lib" user-emacs-directory))
  (setq custom-file (expand-file-name "/home/rob/.emacs.d/custom.el" user-emacs-directory))
  (add-to-list 'load-path base-dir)
  (load custom-file)
  (require 'visual)
  (require 'org-indent)
  (org-indent-mode -1)
  (require 'base-packages)
  (require 'languages)
  (require 'keymap)
)

(defun user-config/variables ()
  (setq inhibit-startup-screen t)
  (setq-default indent-tabs-mode nil) ; use spaces
  (setq-default tab-width 2) ; emacs 23.1, 24.2, default to 8
  (if (fboundp 'menu-bar-mode) (menu-bar-mode -1))
  (if (fboundp 'tool-bar-mode) (tool-bar-mode -1))
  (if (fboundp 'scroll-bar-mode) (scroll-bar-mode -1))
  (setq backup-directory-alist '(("." . "~/.emacs.d/backup"))
    backup-by-copying t
    version-control t
    delete-old-versions t
    kept-new-versions 20
    kept-old-versions 5))

(defun sys-run ()
  (sys-config/melpa)
  (user-config/dependencies)
  (user-config/variables))

(sys-run)
